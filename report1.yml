---
- hosts: all
  connection: local
  gather_facts: no
 
  tasks:
    - name: create directory to generate and store reports
      file:
        path: /opt/rep
        state: directory
      delegate_to: 192.168.0.104

    - name: create a report data
      command: ansible localhost -m setup  -t /opt/rep

    - name: generate report
      shell: ansible-cmdb /opt/rep > /opt/rep/systemoverview.html
